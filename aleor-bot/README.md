<h1>Aleor Telegram Shop Bot (n8n Workflow)</h1>

<p>
  <strong>Aleor bot</strong> ‚Äî —ç—Ç–æ Telegram-–±–æ—Ç –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞ –æ–¥–µ–∂–¥—ã <strong>AL√âOR</strong>, 
  —Å–æ–±—Ä–∞–Ω–Ω—ã–π –≤ <strong>n8n</strong>. –û–Ω –ø–æ–º–æ–≥–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞–º –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑, 
  –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ç–æ–≤–∞—Ä–∞ –ø–æ –∫–æ–¥—É, —É–∑–Ω–∞—Ç—å –æ–± –æ–ø–ª–∞—Ç–µ –∏ –¥–æ—Å—Ç–∞–≤–∫–µ, –∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º ‚Äî –ø–æ–ª—É—á–∞—Ç—å
  —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏ –ø—Ä—è–º–æ –≤ Telegram.
</p>

<hr />

<h2>üìå –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</h2>
<ul>
  <li><strong>–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</strong> —Å –∫–Ω–æ–ø–∫–∞–º–∏:
    <ul>
      <li>üõí –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑</li>
      <li>üì¶ –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –Ω–∞–ª–∏—á–∏–∏</li>
      <li>üßæ –ö–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑?</li>
      <li>üí≥ –û–ø–ª–∞—Ç–∞ –∏ –¥–æ—Å—Ç–∞–≤–∫–∞</li>
    </ul>
  </li>
  <li><strong>–ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –±–µ–∑ –∫–Ω–æ–ø–æ–∫</strong>:
    –±–æ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫ –∫–∞–∫–æ–º—É —Ä–∞–∑–¥–µ–ª—É –æ—Ç–Ω–µ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å
    (–æ–ø–ª–∞—Ç–∞, –¥–æ—Å—Ç–∞–≤–∫–∞, –∑–∞–∫–∞–∑, –Ω–∞–ª–∏—á–∏–µ –∏ —Ç.–¥.).
  </li>
  <li><strong>–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–æ –∫–æ–¥—É</strong>:
    —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ñ–æ—Ä–º–∞—Ç—ã –≤–∏–¥–∞ <code>00013-42</code>, <code>00013 42</code>, 
    <code>00009-XL</code> –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ –≤–µ—Ç–∫—É <em>instant_check_stock</em>.
  </li>
  <li><strong>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑ —á–µ—Ä–µ–∑ LLM</strong>:
    —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è AI Agent (OpenAI GPT-4.1),
    –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ JSON —Å –ø–æ–ª—è–º–∏ <code>valid_order</code>, <code>product_name</code>,
    <code>size</code>, <code>link</code>, <code>raw_message</code>, –∞ –∑–∞—Ç–µ–º ‚Äî 
    –≤ –∞–∫–∫—É—Ä–∞—Ç–Ω—É—é –∑–∞—è–≤–∫—É –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞.
  </li>
  <li><strong>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –≤ Telegram</strong>:
    –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –¥–µ—Ç–∞–ª—è–º–∏ –∑–∞–∫–∞–∑–∞, username –∏ ID –∫–ª–∏–µ–Ω—Ç–∞ 
    –æ–¥–Ω–æ–º—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º.
  </li>
  <li><strong>–û—Ç–≤–µ—Ç –∫–ª–∏–µ–Ω—Ç—É</strong>:
    <ul>
      <li>–ø—Ä–∏ –≤–∞–ª–∏–¥–Ω–æ–º –∑–∞–∫–∞–∑–µ ‚Äî –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —à–∞–≥–∞—Ö;</li>
      <li>–ø—Ä–∏ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ–º –∑–∞–∫–∞–∑–µ ‚Äî –≤–µ–∂–ª–∏–≤—ã–π –∑–∞–ø—Ä–æ—Å –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ.</li>
    </ul>
  </li>
  <li><strong>–ö–∞—Ç–∞–ª–æ–≥ –∏–∑ Airtable</strong> —Å –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–º –≤—ã–≤–æ–¥–æ–º:
    –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –Ω–∞–ª–∏—á–∏–∏ –ø–∞—Ä—Ç–∏—è–º–∏ –ø–æ 20 —à—Ç—É–∫ —Å –∫–Ω–æ–ø–∫–æ–π 
    ¬´‚û°Ô∏è –ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë¬ª –∏ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç —Å–º–µ—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ DataTable <em>OffsetStore</em>.
  </li>
  <li><strong>–ü–∞–º—è—Ç—å –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –¥–∏–∞–ª–æ–≥–∞</strong>:
    —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ DataTable <em>Sessions</em>, 
    —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –Ω—É–∂–Ω—ã–π —ç–∫—Ä–∞–Ω –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–µ—Å—Ç–∏ –º–µ–Ω—é.
  </li>
</ul>

<hr />

<h2>üß© –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –Ω–æ–¥—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</h2>

<h3>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</h3>
<ul>
  <li><strong>Telegram</strong>
    <ul>
      <li><code>Telegram Trigger</code> ‚Äî –ø—Ä–∏—ë–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (—Å–æ–æ–±—â–µ–Ω–∏—è –∏ callback-–∫–Ω–æ–ø–∫–∏).</li>
      <li>–ù–µ—Å–∫–æ–ª—å–∫–æ –Ω–æ–¥ <code>Telegram</code> –¥–ª—è:
        <ul>
          <li>–æ—Ç–ø—Ä–∞–≤–∫–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é (<em>Start menu</em>);</li>
          <li>—ç–∫—Ä–∞–Ω–∞ ¬´–û–ø–ª–∞—Ç–∞ –∏ –¥–æ—Å—Ç–∞–≤–∫–∞¬ª (<em>Reply Payment</em>);</li>
          <li>—ç–∫—Ä–∞–Ω–∞ ¬´–ö–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑?¬ª (<em>Reply HowTo</em>);</li>
          <li>—Å–æ–æ–±—â–µ–Ω–∏–π —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º (<em>–í—Å–µ –ø–æ–∑–∏—Ü–∏–∏2 / –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏3</em>);</li>
          <li>–æ—Ç–≤–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç—É (<em>Reply Customer</em>);</li>
          <li>—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º (<em>Notify Manager</em>, <em>Notify Manager1</em>).</li>
        </ul>
      </li>
      <li><code>Answer Callback</code> ‚Äî –∑–∞–∫—Ä—ã—Ç–∏–µ inline-–∫–Ω–æ–ø–æ–∫ (answerCallbackQuery).</li>
    </ul>
  </li>
  <li><strong>Airtable</strong>
    <ul>
      <li><code>Find Variant1</code> ‚Äî —á—Ç–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã <em>Products</em> –∏–∑ –±–∞–∑—ã 
        <em>Product Catalog</em> (—Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –Ω–∞–ª–∏—á–∏–∏).</li>
    </ul>
  </li>
  <li><strong>OpenAI (—á–µ—Ä–µ–∑ LangChain –Ω–æ–¥—ã n8n)</strong>
    <ul>
      <li><code>OpenAI Chat Model (gpt-4.1)</code> ‚Äî —è–∑—ã–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å.</li>
      <li><code>AI Agent</code> ‚Äî –ø—Ä–æ–º–ø—Ç –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ç–µ–∫—Å—Ç –∫–ª–∏–µ–Ω—Ç–∞ –∑–∞–∫–∞–∑–æ–º, 
          –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–∫–∞–∑–∞.</li>
    </ul>
  </li>
  <li><strong>n8n DataTables</strong>
    <ul>
      <li><em>Sessions</em> ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ <code>chat_id</code>, <code>menuAction</code>, 
        <code>User_name</code>.</li>
      <li><em>Variables</em> ‚Äî —Å—á—ë—Ç—á–∏–∫ <code>order</code>, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç, 
        —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—à—ë–ª –≤ –≤–µ—Ç–∫—É –∑–∞–∫–∞–∑–∞.</li>
      <li><em>OffsetStore</em> ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ <code>listOffset</code> –¥–ª—è –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ 
        –∫–∞—Ç–∞–ª–æ–≥–∞.</li>
    </ul>
  </li>
</ul>

<h3>–õ–æ–≥–∏—á–µ—Å–∫–∏–µ –∏ —Å–µ—Ä–≤–∏—Å–Ω—ã–µ –Ω–æ–¥—ã</h3>
<ul>
  <li><strong>Parse Update1</strong> ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–±–æ—Ä–∞ Telegram update:
    <ul>
      <li>–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —Å–æ–æ–±—â–µ–Ω–∏–µ —ç—Ç–æ –∏–ª–∏ callback;</li>
      <li>–∏–∑–≤–ª–µ–∫–∞–µ—Ç <code>chatId</code>, <code>userId</code>, <code>userName</code>, —Ç–µ–∫—Å—Ç;</li>
      <li>–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç <code>command</code> –∏ <code>intent</code> 
        (main / order / stock / show_list / products_more / payment / howto / instant_check_stock / default);</li>
      <li>—Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç –∫–æ–¥—ã –≤–∏–¥–∞ <code>12345-42</code> –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º 
        <code>instant_check_stock</code>;</li>
      <li>—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç <code>MENU_CONFIG</code> —Å —Ç–µ–∫—Å—Ç–∞–º–∏ –∏ –∫–Ω–æ–ø–∫–∞–º–∏ –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–æ–≤;</li>
      <li>—Å–æ–±–∏—Ä–∞–µ—Ç <code>payload</code> (orderText, productNumber, size –∏ –¥—Ä.) 
        –∏ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—É—é <code>session</code>.</li>
    </ul>
  </li>
  <li><strong>Route by Intent</strong> ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤–µ–¥—ë—Ç –ø–æ—Ç–æ–∫ –≤ –Ω—É–∂–Ω—É—é –≤–µ—Ç–∫—É:
    <ul>
      <li><em>show_menu</em> ‚Üí –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é;</li>
      <li><em>collect_order</em> ‚Üí –ª–æ–≥–∏–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ –∏ AI Agent;</li>
      <li><em>check_stock</em> ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è / –∫–∞—Ç–∞–ª–æ–≥;</li>
      <li><em>show_payment</em> ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ —ç–∫—Ä–∞–Ω–∞ –æ–ø–ª–∞—Ç—ã;</li>
      <li><em>show_help</em> ‚Üí –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é –∑–∞–∫–∞–∑–∞;</li>
      <li><em>confused</em> ‚Üí fallback-–æ—Ç–≤–µ—Ç —Å –∫–Ω–æ–ø–∫–∞–º–∏;</li>
      <li><em>show_stock_menu</em> ‚Üí —ç–∫—Ä–∞–Ω ¬´–Ω–∞–ª–∏—á–∏–µ¬ª —Å –∫–Ω–æ–ø–∫–æ–π ¬´–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫¬ª.</li>
    </ul>
  </li>
  <li><strong>Build Menu Message / Build Menu Message1</strong> ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤ –∏ inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –º–µ–Ω—é.</li>
  <li><strong>Code in JavaScript</strong> ‚Äî –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ AI:
    <ul>
      <li>–ø–∞—Ä—Å–∏—Ç JSON –æ—Ç –º–æ–¥–µ–ª–∏;</li>
      <li>–ø–æ–¥—Å—Ç—Ä–∞—Ö–æ–≤—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–º JSON;</li>
      <li>—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–π <code>manager_text</code> —Å –¥–µ—Ç–∞–ª—è–º–∏ –∑–∞–∫–∞–∑–∞ –∏ –¥–∞–Ω–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç–∞.</li>
    </ul>
  </li>
  <li><strong>Code in JavaScript2</strong> ‚Äî –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –≤—ã–≤–æ–¥ –∫–∞—Ç–∞–ª–æ–≥–∞:
    <ul>
      <li>–¥–µ–ª–∏—Ç —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π Airtable –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ 20 –ø–æ–∑–∏—Ü–∏–π;</li>
      <li>—Å–æ–±–∏—Ä–∞–µ—Ç HTML-—Ç–µ–∫—Å—Ç —Å–æ —Å–ø–∏—Å–∫–æ–º —Ç–æ–≤–∞—Ä–æ–≤, —Ä–∞–∑–º–µ—Ä–æ–º, —Ü–µ–Ω–æ–π –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º;</li>
      <li>–≤—ã—á–∏—Å–ª—è–µ—Ç —Ñ–ª–∞–≥–∏ <code>hasMore</code> –∏ <code>listOffset</code> –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.</li>
    </ul>
  </li>
  <li><strong>If / If1 / If2 / If3</strong> ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑–≤–∏–ª–∫–∏:
    <ul>
      <li>–ø—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∑–∞–ø—Ä–æ—Å callback;</li>
      <li>–≤–µ—Ç–≤–ª–µ–Ω–∏–µ –ø–æ <code>valid_order</code> (–µ—Å—Ç—å –ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–∫–∞–∑);</li>
      <li>–≤—ã–±–æ—Ä –º–µ–∂–¥—É ¬´–ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë¬ª –∏–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π –∫–∞—Ç–∞–ª–æ–≥–∞.</li>
    </ul>
  </li>
  <li><strong>Merge / Merge1</strong> ‚Äî –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Telegram, DataTables –∏ Airtable.</li>
  <li><strong>Save Session / Save Session Reset*</strong> ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞ 
    (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–æ–∑–≤—Ä–∞—Ç –≤ <code>menuAction = "main"</code> –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞).</li>
  <li><strong>Order + 1 / Order -1 / Order --</strong> ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–º <code>order</code> 
    –≤ DataTable <em>Variables</em>.</li>
</ul>

<hr />

<h2>üîÅ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞</h2>

<ol>
  <li><strong>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –±–æ—Ç—É –∏–ª–∏ –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É</strong>
    <ul>
      <li><code>Telegram Trigger</code> –ø–æ–ª—É—á–∞–µ—Ç update.</li>
      <li>–ß–µ—Ä–µ–∑ <code>Get session</code> –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è —Å–µ—Å—Å–∏—è –∏–∑ DataTable <em>Sessions</em>.</li>
      <li><code>Parse Update1</code> —Ä–∞–∑–±–∏—Ä–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –∏ intent, 
        –æ–±–Ω–æ–≤–ª—è–µ—Ç <code>session.menuAction</code>.</li>
    </ul>
  </li>
  <li><strong>–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ intent</strong>
    <ul>
      <li><code>Route by Intent</code> –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Ç–æ–∫ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≤–µ—Ç–∫—É:
        –º–µ–Ω—é, –∑–∞–∫–∞–∑, –Ω–∞–ª–∏—á–∏–µ, –æ–ø–ª–∞—Ç–∞, –∫–∞–∫ –∑–∞–∫–∞–∑–∞—Ç—å, confused –∏–ª–∏ –º–µ–Ω—é ¬´–Ω–∞–ª–∏—á–∏–µ¬ª.</li>
    </ul>
  </li>
  <li><strong>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑</strong>
    <ul>
      <li>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ —ç–∫—Ä–∞–Ω –∑–∞–∫–∞–∑–∞ –∏ –ø–∏—à–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç.</li>
      <li><code>AI Agent</code> —Å –ø–æ–º–æ—â—å—é OpenAI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON.</li>
      <li><code>Code in JavaScript</code> –ø–∞—Ä—Å–∏—Ç –æ—Ç–≤–µ—Ç –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç:
        <code>valid_order</code>, <code>manager_text</code>, –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞.</li>
      <li><code>If2</code> –ø—Ä–æ–≤–µ—Ä—è–µ—Ç <code>valid_order</code>:
        <ul>
          <li>–µ—Å–ª–∏ <strong>true</strong> ‚Äî <code>Reply Customer</code> 
            –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É, <code>Notify Manager</code> / <code>Notify Manager1</code> 
            ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º, –∑–∞—Ç–µ–º —Å–µ—Å—Å–∏—è –∏ —Å—á—ë—Ç—á–∏–∫–∏ –æ–±–Ω—É–ª—è—é—Ç—Å—è;</li>
          <li>–µ—Å–ª–∏ <strong>false</strong> ‚Äî <code>Error in the order</code> 
            –ø—Ä–æ—Å–∏—Ç –∫–ª–∏–µ–Ω—Ç–∞ –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>–ö–∞—Ç–∞–ª–æ–≥ –∏ –Ω–∞–ª–∏—á–∏–µ</strong>
    <ul>
      <li>–ü—Ä–∏ –≤—ã–±–æ—Ä–µ ¬´–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –Ω–∞–ª–∏—á–∏–∏¬ª –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á—Ç–µ–Ω–∏–µ –∏–∑ Airtable
        (<code>Find Variant1</code> ‚Üí <code>Merge1</code> ‚Üí <code>Code in JavaScript2</code>).</li>
      <li><code>Code in JavaScript2</code> —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–∑ 20 —Ç–æ–≤–∞—Ä–æ–≤ –∏ –≤—ã—á–∏—Å–ª—è–µ—Ç, –µ—Å—Ç—å –ª–∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ.</li>
      <li><code>If3</code>:
        <ul>
          <li>–µ—Å–ª–∏ <code>hasMore = true</code> ‚Äî –Ω–æ–¥–∞ <em>–í—Å–µ –ø–æ–∑–∏—Ü–∏–∏2</em> –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–æ–∫ + –∫–Ω–æ–ø–∫—É 
            ¬´‚û°Ô∏è –ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë¬ª, –∞ <code>ListOffset</code> –æ–±–Ω–æ–≤–ª—è–µ—Ç DataTable;</li>
          <li>–µ—Å–ª–∏ <code>false</code> ‚Äî –Ω–æ–¥–∞ <em>–í—Å–µ –ø–æ–∑–∏—Ü–∏–∏3</em> –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ + –∫–Ω–æ–ø–∫—É 
            ¬´–í –º–µ–Ω—é¬ª, –∞ <code>ListOffset1</code> —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç offset.</li>
        </ul>
      </li>
      <li>–ö–Ω–æ–ø–∫–∏ <code>products_more_X</code> —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å–∫–∞—é—Ç –≤–µ—Ç–∫—É <em>check_stock</em> 
        —Å –Ω–æ–≤—ã–º offset.</li>
    </ul>
  </li>
  <li><strong>–≠–∫—Ä–∞–Ω –æ–ø–ª–∞—Ç—ã –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</strong>
    <ul>
      <li><code>Reply Payment</code> ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—É –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –æ–ø–ª–∞—Ç—ã –∏ –¥–æ—Å—Ç–∞–≤–∫–∏.</li>
      <li><code>Reply HowTo</code> ‚Äî –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º @ALEOR_BUYER.</li>
    </ul>
  </li>
  <li><strong>Fallback (confused)</strong>
    <ul>
      <li>–ï—Å–ª–∏ –±–æ—Ç –Ω–µ –ø–æ–Ω—è–ª –∑–∞–ø—Ä–æ—Å, –Ω–æ–¥–∞ <code>Confused</code> –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–µ–∂–ª–∏–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ 
          –∏ –∫–Ω–æ–ø–∫–∏ —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ä–∞–∑–¥–µ–ª–∞–º–∏.</li>
    </ul>
  </li>
</ol>

<hr />

<h2>‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫</h2>

<ol>
  <li>–†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ <strong>n8n</strong> (self-hosted –∏–ª–∏ n8n.cloud).</li>
  <li>–°–æ–∑–¥–∞–π—Ç–µ Telegram-–±–æ—Ç–∞ —á–µ—Ä–µ–∑ <code>@BotFather</code> –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω.</li>
  <li>–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ Airtable-–±–∞–∑—É —Å —Ç–∞–±–ª–∏—Ü–µ–π <em>Products</em> (–±—Ä–µ–Ω–¥, —Ä–∞–∑–º–µ—Ä, —Ü–µ–Ω–∞, –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —Ç.–ø.).</li>
  <li>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ DataTables –≤ n8n:
    <ul>
      <li><em>Sessions</em> ‚Äî –ø–æ–ª—è <code>chat_id</code>, <code>menuAction</code>, <code>User_name</code>;</li>
      <li><em>Variables</em> ‚Äî –ø–æ–ª–µ <code>order</code>;</li>
      <li><em>OffsetStore</em> ‚Äî –ø–æ–ª–µ <code>listOffset</code>.</li>
    </ul>
  </li>
  <li>–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–π workflow (.json) –≤ n8n.</li>
  <li>–ü—Ä–∏–≤—è–∂–∏—Ç–µ –∫—Ä–µ–¥–µ–Ω—à–µ–ª—ã:
    <ul>
      <li>Telegram API (–±–æ—Ç Aleor);</li>
      <li>Airtable Personal Access Token –∏ –Ω—É–∂–Ω—É—é –±–∞–∑—É/—Ç–∞–±–ª–∏—Ü—É;</li>
      <li>OpenAI API-–∫–ª—é—á (–¥–ª—è GPT-4.1).</li>
    </ul>
  </li>
  <li>–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ workflow –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É <code>/start</code> –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é.</li>
</ol>

<hr />

<h2>üõ† –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è</h2>
<ul>
  <li>–ò–∑–º–µ–Ω–∏—Ç–µ —Ç–µ–∫—Å—Ç—ã –≤ –æ–±—ä–µ–∫—Ç–µ <code>MENU_CONFIG</code> –≤ –Ω–æ–¥–µ <strong>Parse Update1</strong>, 
    —á—Ç–æ–±—ã –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞ –ø–æ–¥ –¥—Ä—É–≥–æ–π –±—Ä–µ–Ω–¥ –∏–ª–∏ —Å—Ç–∏–ª–∏—Å—Ç–∏–∫—É –æ–±—â–µ–Ω–∏—è.</li>
  <li>–ü–æ–¥—Å—Ç—Ä–æ–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã Airtable –∏ –≤—ã–≤–æ–¥ –≤ <strong>Code in JavaScript2</strong>
    (–±—Ä–µ–Ω–¥, —Ü–µ–Ω—ã, —Ñ–æ—Ä–º–∞—Ç –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç–æ–≤–∞—Ä–∞).</li>
  <li>–û–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ–º–ø—Ç –≤–Ω—É—Ç—Ä–∏ <strong>AI Agent</strong>, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –≤—ã—Ç–∞—Å–∫–∏–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è 
    (—Ü–≤–µ—Ç, —Ç–∏–ø —Ç–æ–≤–∞—Ä–∞, –º–∞—Ç–µ—Ä–∏–∞–ª –∏ —Ç.–¥.).</li>
  <li>–ó–∞–º–µ–Ω–∏—Ç–µ Telegram ID –≤ –Ω–æ–¥–∞—Ö <strong>Notify Manager</strong> –∏ <strong>Notify Manager1</strong>, 
    —á—Ç–æ–±—ã –∑–∞—è–≤–∫–∏ —É—Ö–æ–¥–∏–ª–∏ –Ω—É–∂–Ω—ã–º –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º.</li>
</ul>
